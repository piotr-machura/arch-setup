/* --------------------------
   FIREFOX CUSTOM STYLE SHEET
   -------------------------- */
/* Note: Quitefox by https://github.com/coekuss/quietfox */
/* Note: enable toolkit.legacyUserProfileCustomizations.stylesheets in about:config */

* {
    /* CUSTOMIZATION
       ------------- */
    --tab-corner-rounding: 0px;
    --menu-corner-rounding: 0px;
    --menu-item-height: 30px;
    --button-corner-rounding: 0px;
    --animation-speed: 0.15s;
}

@namespace url("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul");

/* -------------------- Style tab bar -------------------- */

scrollbox[part="scrollbox"][flex="1"][orient="horizontal"] {
    padding-left: 12px !important;
}

[sizemode="maximized"] [first-visible-tab] {
    margin-left: -12px !important;
}

[sizemode="maximized"] [first-visible-tab] stack {
    margin-left: 12px !important;
}

.tab-background,
.tab-loading-burst {
    border-radius: var(--tab-corner-rounding) var(--tab-corner-rounding) 0px 0px !important;
    margin: -1px !important;
}

:root[uidensity="compact"] {
    --tab-min-height: 31px !important;
}

.tab-line {
    display: none !important;
}

[last-visible-tab] {
    margin-right: calc(
        var(--tab-corner-rounding) + 2px
    ) !important; /* fix unexpected tab overflow */
}

/* -------------------- Style toolbar -------------------- */
.toolbarbutton-icon,
.toolbarbutton-badge-stack {
    border-radius: var(--tab-corner-rounding) var(--tab-corner-rounding) 0px 0px !important;
}

#nav-bar .toolbarbutton-1 {
    margin-right: 2px !important;
}

.close-icon:not(.tab-close-button):hover {
    fill-opacity: 0 !important;
}

.tab-close-button {
    transition: fill-opacity var(--animation-speed) !important;
}

.findbar-textbox:focus {
    border: 1px solid grey !important;
}

#BMB_bookmarksShowAll {
    display: none !important;
}

/* compact density buttons */

:root[uidensity="compact"] #nav-bar .toolbarbutton-1 {
    margin-top: 4px !important;
    margin-bottom: 4px !important;
    padding: 0px 0px 0px 0px !important;
}

:root[uidensity="compact"] #nav-bar toolbaritem[animate] box {
    margin-top: 1px !important;
}

:root[uidensity="compact"] #back-button {
    margin-left: 3px !important;
}

:root[uidensity="compact"] #back-button[open] {
    background-color: var(--toolbarbutton-active-background) !important;
}

:root[uidensity="compact"] #back-button:not([disabled]):not([open]):hover {
    background-color: var(--toolbarbutton-hover-background) !important;
}
:root[uidensity="compact"] #back-button:not([disabled]):not([open]):active {
    background-color: var(--toolbarbutton-active-background) !important;
}

:root[uidensity="compact"] #identity-box,
:root[uidensity="compact"] #tracking-protection-icon-container {
    min-width: 2px !important;
    padding-left: 6px !important;
    padding-right: 6px !important;
}

:root[uidensity="compact"] #urlbar {
    height: 30px !important;
    margin-top: 0px !important;
    margin-bottom: 0px !important;
    padding-bottom: 0px !important;
}

:root[uidensity="compact"] .urlbar-icon:not(#pocket-button) {
    width: 28px !important;
    height: 30px !important;
    padding: 6px !important;
}

:root[uidensity="compact"] #pocket-button {
    width: 28px !important;
    height: 40px !important;
    padding: 7px 6px 5px 6px !important;
}

:root[uidensity="compact"] #contextual-feature-recommendation {
    width: 32px !important;
    height: 32px !important;
    padding: 2px !important;
}

:root[uidensity="compact"] #PersonalToolbar {
    height: 25px !important;
    margin-top: -3px !important;
}

:root[uidensity="compact"] #library-animatable-box {
    margin-top: 5px !important;
}

:root[uidensity="compact"] #tabs-newtab-button {
    margin-left: -5px !important;
    margin-bottom: 1px !important;
    padding-bottom: 1px !important;
}


/* various */
.urlbar-input-box,
#identity-box,
#tracking-protection-icon-container,
.urlbar-history-dropmarker,
.urlbar-page-action,
#reader-mode-button,
[anonid="urlbar-go-button"],
.toolbarbutton-1 > stack,
toolbarbutton:not(.titlebar-button):not([class^="findbar-find"]):not([class^="scrollbutton"]),
.close-icon {
    border-radius: var(--button-corner-rounding) !important;
}

.findbar-find-next {
    border-radius: 0px var(--button-corner-rounding)
        var(--button-corner-rounding) 0px !important;
}

.findbar-textbox {
    border-radius: var(--button-corner-rounding) 0px 0px
        var(--button-corner-rounding) !important;
}

.bookmark-item {
    padding-left: 7px !important;
    padding-right: 7px !important;
    margin-right: 0px !important;
}

#urlbar {
    border-radius: calc(var(--button-corner-rounding)) !important;
    border: none !important;
}

/* style identity box */
#identity-box {
    margin-right: 0px !important;
}

/* style address bar */
#urlbar-background {
    background-color: transparent !important;
    border: none !important;
    box-shadow: none !important;
}

#urlbar[breakout-extend] {
    top: 3.5px !important;
    left: 0px !important;
    padding: 0px 0px 0px 0px !important;
    height: auto !important;
    width: 100% !important;
}

#urlbar[breakout][breakout-extend] > #urlbar-input-container {
    height: var(--urlbar-toolbar-height) !important;
    padding-block: 0px !important;
    padding-inline: 0px !important;
    padding-bottom: 6px !important;
    margin-bottom: -5px !important;
    margin-top: -1px !important;
}

/* urlbarView = the menu when you expand the address bar */
.urlbarView {
    width: 100% !important;
    margin-inline: 0px !important;
    box-shadow: 0px 5px 15px -7px black !important;
    border-radius: 0px 0px var(--menu-corner-rounding)
        var(--menu-corner-rounding) !important;
    border: none !important;
    padding-top: 0px !important;
}

.urlbarView-body-inner {
    border: none !important;
}

.search-one-offs {
    background-color: var(--toolbar-bgcolor) !important;
}

#tracking-protection-icon-container {
    border-inline-end: none !important;
}

#pageActionSeparator {
    display: none !important;
}

.urlbar-icon,
#userContext-indicator,
#userContext-label {
    fill: transparent !important;
    background-color: transparent !important;
    color: transparent !important;
    transition: var(--animation-speed) !important;
}

#urlbar:hover .urlbar-icon,
#urlbar:active .urlbar-icon,
#urlbar[focused] .urlbar-icon {
    fill: var(--toolbar-color) !important;
}

#urlbar:hover #userContext-indicator,
#urlbar:active #userContext-indicator,
#urlbar[focused] #userContext-indicator,
#urlbar:hover #userContext-label,
#urlbar:active #userContext-label,
#urlbar[focused] #userContext-label {
    color: var(--identity-tab-color) !important;
    fill: var(--identity-tab-color) !important;
}

.urlbar-page-action[open] {
    background-color: var(--toolbarbutton-active-background) !important;
    fill: var(--toolbar-color) !important;
}

.urlbar-page-action[open]:hover {
    background-color: var(--toolbarbutton-active-background) !important;
    fill: var(--toolbar-color) !important;
}

.urlbar-page-action[open] .urlbar-icon {
    fill: var(--toolbar-color) !important;
}

.urlbar-scheme {
    padding-bottom: 11px !important;
}

#urlbar-container {
    margin-left: -1px !important;
    margin-right: -1px !important;
}

.urlbar-input-box {
    padding: 0px 5px !important;
}

#urlbar {
    background-color: transparent !important;
    color: var(--lwt-toolbar-field-color, black) !important;
}

#urlbar:not(.hidden-focus)[focused="true"] {
    background-color: var(--toolbarbutton-hover-background) !important;
}

#pocket-button {
    padding-bottom: 4px !important;
}

.urlbar-icon-wrapper > .urlbar-icon:hover {
    background-color: transparent !important;
}

.urlbar-icon-wrapper {
    background-color: transparent !important;
    transition: background-color var(--animation-speed) !important;
}

#urlbar:not([focused]) .urlbar-input-box:hover,
#identity-box:hover,
#tracking-protection-icon-container:hover,
.urlbar-icon:hover,
.urlbar-icon-wrapper:hover,
[anonid="urlbar-go-button"]:hover {
    background-color: var(--toolbarbutton-hover-background) !important;
}

#identity-box:active,
#tracking-protection-icon-container:active,
.urlbar-icon:active,
.urlbar-icon-wrapper:active,
[anonid="urlbar-go-button"]:active {
    background-color: var(--toolbarbutton-active-background) !important;
}

.urlbar-input-box,
#identity-box,
#tracking-protection-icon-container,
[anonid="urlbar-go-button"],
#urlbar {
    transition: background-color var(--animation-speed) !important;
}

#tracking-protection-icon,
#identity-box image {
    transition: fill-opacity var(--animation-speed) !important;
}

[lwthemetextcolor="dark"] .urlbarView-body-outer {
    background-color: #f5f6f7 !important;
    color: var(--toolbar-color) !important;
}

.urlbarView-body-inner {
    background-color: var(--toolbar-bgcolor) !important;
}

.downloadsPanelFooterButton:hover {
    outline: none !important;
}

/* -------------------- Style context menus -------------------- */
#context-navigation,
#context-sep-navigation,
#context-bookmarklink,
#context-viewinfo,
#context-viewpartialsource-selection,
#inspect-separator,
#context-savelink,
#context-sendimage,
#context-setDesktopBackground,
#context_reloadTab,
#context_moveTabOptions,
#context_bookmarkTab,
.bookmarks-actions-menuseparator,
.openintabs-menuitem {
    display: none !important;
}

menupopup,
menupopup menuitem,
menupopup menu,
menupopup menuseparator {
    -moz-appearance: none !important;
}

menupopup:not(#BMB_bookmarksPopup) {
    padding: 6px 9px 9px !important;
    border: 0 !important;
    background: 0 !important;
}

menu[open] menupopup:not(#BMB_bookmarksPopup) {
    margin: -12px -9px 0 !important;
}

#BMB_bookmarksPopup menu[open] menupopup {
    transform: translateY(4px) !important;
}

menupopup menuseparator {
    margin-top: 5px !important;
    margin-bottom: 5px !important;
    padding: 0px !important;
    border-bottom: none !important;
    opacity: 0.2 !important;
}
.menupopup-arrowscrollbox {
    background: Menu !important; /* fall back if adaptable colors are removed */
}

.menupopup-arrowscrollbox:not(.in-bookmarks-menu) {
    padding: 6px 0 !important;
}

.panel-arrowcontent {
    padding-top: 0px !important;
    border: none !important;
}

/* shadows and rounded corners for menus */
.menupopup-arrowscrollbox:not(.in-bookmarks-menu) {
    border-radius: var(--menu-corner-rounding) !important;
    box-shadow: 0px 2px 9px -3px black !important;
}

.panel-arrowcontainer .panel-arrowcontent,
.menupopup-arrowscrollbox,
hbox[flex="1"][part="innerbox"] {
    border-radius: var(--menu-corner-rounding) !important;
}

.in-bookmarks-menu {
    padding-bottom: 5px !important;
    padding-top: 5px !important;
}

menu,
menuitem,
menucaption {
    -moz-appearance: none !important;
    height: var(--menu-item-height) !important;
}

menu,
menuitem,
menucaption {
    padding-left: 5px !important;
    padding-right: 5px !important;
}

menu:not(.subviewbutton) > .menu-right {
    margin-top: 2px !important;
    margin-right: 0px !important;
    width: 0px !important;
}

menu:not(.subviewbutton) > .menu-right image {
    margin-right: -5px !important;
    margin-top: -2px !important;
    border: 6px solid var(--toolbar-color) !important;
    border-top-color: transparent !important;
    border-right-color: transparent !important;
    border-bottom-color: transparent !important;
}

panelview toolbarbutton:not(#fxa-manage-account-button) {
    height: var(--menu-item-height) !important;
}

#BMB_bookmarksPopup .menu-right {
    height: 23px !important;
}

#sidebar-switcher-bookmarks,
#customization-uidensity-menuitem-compact {
    margin-top: 5px !important;
}

#customization-lwtheme-menu-header {
    margin-top: 0px !important;
}

/* linux and mac-specific adjustments */
@media not (-moz-os-version: windows-win10) {
    @media not (-moz-os-version: windows-win8) {
        @media not (-moz-os-version: windows-win7) {
            hbox[flex="1"][part="innerbox"] {
                box-shadow: 0px 2px 12px -6px black !important;
            }

            .menu-iconic-left {
                margin: 0px 6px !important;
            }

            #BMB_bookmarksPopup menu[open] menupopup {
                transform: translateY(1px) !important;
            }
        }
    }
}

/* make menus adapt to theme */
menu,
menuitem,
menucaption {
    color: var(--toolbar-color) !important;
}

.menupopup-arrowscrollbox {
    background-color: var(--toolbar-bgcolor, Menu) !important;
}

menu[_moz-menuactive="true"]:not([disabled="true"]),
menuitem[_moz-menuactive="true"]:not([disabled="true"]),
menucaption[_moz-menuactive="true"]:not([disabled="true"]) {
    background-color: var(--toolbarbutton-hover-background) !important;
}

menu[disabled="true"],
menuitem[disabled="true"],
menucaption[disabled="true"] {
    color: var(--toolbarbutton-hover-background) !important;
}

.panel-arrow {
    fill: var(--toolbar-bgcolor) !important;
}

.panel-subview-body {
    background-color: var(--toolbar-bgcolor) !important;
}

#downloadsPanel-mainView {
    background-color: var(--toolbar-bgcolor) !important;
}

#identity-popup-mainView {
    background-color: var(--toolbar-bgcolor) !important;
}

#identity-popup-content-blocking-detected {
    color: var(--toolbar-active-background) !important;
}

#identity-popup-permission-empty-hint {
    color: var(--toolbar-active-background) !important;
}

.identity-popup-warning-yellow {
    color: black !important;
}

panel:not([viewId^="PanelUI-webext"]) .panel-arrow {
    fill: var(--toolbar-bgcolor) !important;
}

.bookmark-item [class^="scrollbutton"] {
    background-color: var(--toolbar-bgcolor) !important;
}
